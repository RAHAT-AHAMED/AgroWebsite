(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(i,a){var r=6,o=i.event.add,u=i.event.remove,d=function(e,t,n){i.event.trigger(t,n,e)},c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(function(){e()},25)}}(),f={textarea:true,input:true,select:true,button:true},m={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},s={move:"touchmove",cancel:"touchend",end:"touchend"};function v(e){var n=e,i=false,a=false;function t(e){if(i){n();c(t);a=true;i=false}else{a=false}}this.kick=function(e){i=true;if(!a){t()}};this.end=function(e){var t=n;if(!e){return}if(!a){e()}else{n=i?function(){t();e()}:e;i=true}}}function e(){return true}function p(){return false}function t(e){e.preventDefault()}function n(e){if(f[e.target.tagName.toLowerCase()]){return}e.preventDefault()}function g(e){return e.which===1&&!e.ctrlKey&&!e.altKey}function l(e,t){var n,i;if(e.identifiedTouch){return e.identifiedTouch(t)}n=-1;i=e.length;while(++n<i){if(e[n].identifier===t){return e[n]}}}function h(e,t){var n=l(e.changedTouches,t.identifier);if(!n){return}if(n.pageX===t.pageX&&n.pageY===t.pageY){return}return n}function X(e){var t;if(!g(e)){return}t={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp};o(document,m.move,Y,t);o(document,m.cancel,w,t)}function Y(e){var t=e.data;q(e,t,e,y)}function w(e){y()}function y(){u(document,m.move,Y);u(document,m.cancel,w)}function T(e){var t,n;if(f[e.target.tagName.toLowerCase()]){return}t=e.changedTouches[0];n={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:e.timeStamp,identifier:t.identifier};o(document,s.move+"."+t.identifier,S,n);o(document,s.cancel+"."+t.identifier,k,n)}function S(e){var t=e.data,n=h(e,t);if(!n){return}q(e,t,n,_)}function k(e){var t=e.data,n=l(e.changedTouches,t.identifier);if(!n){return}_(t.identifier)}function _(e){u(document,"."+e,S);u(document,"."+e,k)}function q(e,t,n,i){var a=n.pageX-t.startX,o=n.pageY-t.startY;if(a*a+o*o<r*r){return}F(e,t,n,a,o,i)}function A(){this._handled=e;return false}function D(e){e._handled()}function F(e,t,n,i,a,o){var r=t.target,u,c;u=e.targetTouches;c=e.timeStamp-t.timeStamp;t.type="movestart";t.distX=i;t.distY=a;t.deltaX=i;t.deltaY=a;t.pageX=n.pageX;t.pageY=n.pageY;t.velocityX=i/c;t.velocityY=a/c;t.targetTouches=u;t.finger=u?u.length:1;t._handled=A;t._preventTouchmoveDefault=function(){e.preventDefault()};d(t.target,t);o(t.identifier)}function R(e){var t=e.data.timer;e.data.touch=e;e.data.timeStamp=e.timeStamp;t.kick()}function x(e){var t=e.data.event,n=e.data.timer;b();K(t,n,function(){setTimeout(function(){u(t.target,"click",p)},0)})}function b(e){u(document,m.move,R);u(document,m.end,x)}function j(e){var t=e.data.event,n=e.data.timer,i=h(e,t);if(!i){return}e.preventDefault();t.targetTouches=e.targetTouches;e.data.touch=i;e.data.timeStamp=e.timeStamp;n.kick()}function C(e){var t=e.data.event,n=e.data.timer,i=l(e.changedTouches,t.identifier);if(!i){return}L(t);K(t,n)}function L(e){u(document,"."+e.identifier,j);u(document,"."+e.identifier,C)}function N(e,t,n,i){var a=n-e.timeStamp;e.type="move";e.distX=t.pageX-e.startX;e.distY=t.pageY-e.startY;e.deltaX=t.pageX-e.pageX;e.deltaY=t.pageY-e.pageY;e.velocityX=.3*e.velocityX+.7*e.deltaX/a;e.velocityY=.3*e.velocityY+.7*e.deltaY/a;e.pageX=t.pageX;e.pageY=t.pageY}function K(e,t,n){t.end(function(){e.type="moveend";d(e.target,e);return n&&n()})}function O(e,t,n){o(this,"movestart.move",D);return true}function z(e){u(this,"dragstart drag",t);u(this,"mousedown touchstart",n);u(this,"movestart",D);return true}function Q(e){if(e.namespace==="move"||e.namespace==="moveend"){return}o(this,"dragstart."+e.guid+" drag."+e.guid,t,a,e.selector);o(this,"mousedown."+e.guid,n,a,e.selector)}function B(e){if(e.namespace==="move"||e.namespace==="moveend"){return}u(this,"dragstart."+e.guid+" drag."+e.guid);u(this,"mousedown."+e.guid)}i.event.special.movestart={setup:O,teardown:z,add:Q,remove:B,_default:function(t){var n,i;if(!t._handled()){return}function e(e){N(n,i.touch,i.timeStamp);d(t.target,n)}n={target:t.target,startX:t.startX,startY:t.startY,pageX:t.pageX,pageY:t.pageY,distX:t.distX,distY:t.distY,deltaX:t.deltaX,deltaY:t.deltaY,velocityX:t.velocityX,velocityY:t.velocityY,timeStamp:t.timeStamp,identifier:t.identifier,targetTouches:t.targetTouches,finger:t.finger};i={event:n,timer:new v(e),touch:a,timeStamp:a};if(t.identifier===a){o(t.target,"click",p);o(document,m.move,R,i);o(document,m.end,x,i)}else{t._preventTouchmoveDefault();o(document,s.move+"."+t.identifier,j,i);o(document,s.end+"."+t.identifier,C,i)}}};i.event.special.move={setup:function(){o(this,"movestart.move",i.noop)},teardown:function(){u(this,"movestart.move",i.noop)}};i.event.special.moveend={setup:function(){o(this,"movestart.moveend",i.noop)},teardown:function(){u(this,"movestart.moveend",i.noop)}};o(document,"mousedown.move",X);o(document,"touchstart.move",T);if(typeof Array.prototype.indexOf==="function"){(function(e,t){var n=["changedTouches","targetTouches"],i=n.length;while(i--){if(e.event.props.indexOf(n[i])===-1){e.event.props.push(n[i])}}})(i)}});